<html ng-app="mortgageApp" ng-controller="MortgageCtrl">
<head>
    <title>Mortgage Calculator</title>
    <link rel="stylesheet" type="text/css" href="mortgage.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">


    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>

    <script src="bower_components/Chart.js/Chart.js"></script>
    <script src="bower_components/angular-chart.js/dist/angular-chart.js"></script>
    <link rel="stylesheet" href="bower_components/angular-chart.js/dist/angular-chart.css">

    <script src="mortgageCtrl.js.coffee"></script>

</head>


<body>
    <div class="wrapper" >
        <div class="heading">
            <h2> Calculate your Mortgage Payment </h2>
            <div id="details">
                1. Enter your mortgage information
               <br> 2. The bottom table will display your monthly payment over 30 years.
               <br> 3. The graph will display the ratio of monthly interest to principal over time.
               <br> 4. Scroll over each title for more details.
            </div>
            <div id="logo"><img src="images/pv-logo.png"/></div>
        </div>

        <div class="page-body">
            <form action="#" class="mortgage-form" ng-submit="calculateMortgage()" >
            <table class="pure-table pure-table-horizontal" >
            			<tr>
            				<td colspan="2"> Enter your mortgage information </td>
            			</tr>
                        <tr> 
                            <th>Type of Mortgage</th>
                            <td>30-Year Fix <input type="checkbox" ng-model="formData.mortgage_type" /> </td>
                        </tr>
                        <tr>
                            <th>Number of Payments</th>
                            <td> <ng-model="formData.number_of_payments" ng-value="formData.number_of_payments" ng-bind="formData.number_of_payments" /> </td>
                        </tr>
                        <tr>
                            <th>Total Price of House</th>
                            <td> <input type="number" ng-model="formData.total_price" /> </td>
                        </tr>

                        <tr>
                            <th>Down Payment</th>
                            <td> <input type="number" ng-model="formData.downpayment" /> 
                                 <br> <input type="radio" ng-model="formData.down_type" ng-value="2" /> Amount
                                 <br> <input type="radio" ng-model="formData.down_type" ng-value="1" /> Percentage
                            </td>
                        </tr>
                        <tr>
                            <th>Annual Interest Rate</th>
                            <td> <input type="number" ng-model="formData.annual_interest_rate" /> </td>
                        </tr>
                        <tr>
                            <th>Loan Amount</th>

                            <td> $<ng-model="formData.loan_amount" ng-value="formData.loan_amount" ng-bind="formData.loan_amount" /> </td>
                        </tr>
                        <tr>
                        	<td colspan="2">
                                <input type="button" ng-click="reset()" value="Reset"/>
            					<!-- <input type="submit" value="Submit"/> -->
                                <input type="button" ng-click="calculateMortgageProgression()" value="Calculate Progression"/>
            				</td>
                        </tr>          

            </table>

            </form>

            <div id="graph-title">Cumulative Interest and Principal Payments Over 30 Years.</div>
            <div id="y-axis">Amount (in $)</div>

            <canvas id="line" class="chart chart-line" data="data"
              labels="labels" legend="true" series="series" colours="colours"
              click="onClick"> 
            </canvas> 

            <div id="x-axis">Years</div>

            <div id="progression-table">
                <div id="prog-table-title"> Your Monthly Payment Over 30 Years</div>
                <table id="prog-table" class="pure-table pure-table-striped" >
                    <thead>
                        <tr>
                            <th>Payment Number</th>
                            <th>Monthly Payment</th>
                            <th>Monthly Interest</th>
                            <th>Monthly Principal</th>
                            <th>Remaining Balance</th>    
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="info in infos">
                            <td>{{ info.pay_index }}</td>
                            <td>{{ total_monthly_payment | currency }}</td>
                            <td>{{ info.month_interest | currency}}</td>
                            <td>{{ info.month_principal | currency}}</td>
                            <td>{{ info.leftover_balance | currency }}</td>
                        </tr>     
                    </tbody>

                </table>
                </div>


            </div>


        <div class="footer">
        </div>

    </div>
</body>




</html>